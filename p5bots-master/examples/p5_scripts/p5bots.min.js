/*! p5bots.js v0.3.2 January 02, 2017 */ !function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.p5js=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./lib/socket_utils.js"),e=a("./lib/special_methods_index.js"),f="Please check mode. Value should be 'analog', 'digital', 'pwm', or servo",g={button:{fn:e.button,mode:"digital"},knock:{fn:e.piezo,mode:"analog"},led:{fn:e.led,mode:"digital"},motor:{fn:e.motor,mode:"pwm"},piezo:{fn:e.piezo,mode:"digital"},rgbled:{fn:e.rgbled,mode:"pwm"},servo:{fn:e.servo,mode:"servo"},temp:{fn:e.temp,mode:"analog"},tone:{fn:e.piezo,mode:"digital"},vres:{fn:e.vres,mode:"analog"}},h=function(a,b){this.port=a,this.type=b.toLowerCase()||"arduino",this.ready=!1,this.eventQ=[],this.pinsArray=[],this.HIGH="high",this.LOW="low",this.INPUT="input",this.OUTPUT="output",this.ANALOG="analog",this.DIGITAL="digital",this.PWM="pwm",this.SERVO="servo",this.BUTTON="button",this.KNOCK="knock",this.LED="led",this.MOTOR="motor",this.PIEZO="piezo",this.RGBLED="rgbled",this.TEMP="temp",this.TONE="tone",this.VRES="vres"},i=function(a,b,c){this.pin=a,this.direction=c?c.toLowerCase():"output",this.mode=b?b.toLowerCase():"digital",g[this.mode]&&(this.special=this.mode,this.mode=g[this.mode].mode),this.write=function(){throw new Error("Write undefined")},this.read=function(){throw new Error("Read undefined")}};h.prototype.pin=function(a,b,c){var e=new i(a,b,c);if(e.special)g[e.special].fn(e);else if("digital"===e.mode||"analog"===e.mode)d.dispatch(d.pinInit(e.pin,e.mode,e.direction)),d.constructFuncs(e);else{if("pwm"!==e.mode)throw new Error(f);d.dispatch(d.pinInit(e.pin,e.mode,e.direction)),d.constructFuncs(e,"analog")}return this.pinsArray.push(e),e},p5.board=function(a,b){return d.board=new h(a,b),d.boardInit(a,b),d.socket.on("board ready",function(a){d.board.ready=!0,d.board.eventQ.forEach(function(a){a.func.apply(null,a.args)})}),d.board},p5.serial=e.serial},{"./lib/socket_utils.js":9,"./lib/special_methods_index.js":10}],2:[function(a,b,c){function d(a){return a.direction="input",e.dispatch(e.pinInit(a.pin,a.mode,a.direction)),e.constructFuncs(a),a.pressed=function(a){function b(){this.buttonPressedcb=a}e.dispatch(b.bind(this))},a.released=function(a){function b(){this.buttonReleasedcb=a}e.dispatch(b.bind(this))},a.held=function(a,b){function c(){this.buttonHeldcb=function(){var c=setTimeout(a,b);return c}}e.dispatch(c.bind(this))},a}var e=a("./socket_utils.js");b.exports=d},{"./socket_utils.js":9}],3:[function(a,b,c){function d(a){e.dispatch(e.pinInit(a.pin,a.mode,a.direction)),e.constructFuncs(a);var b=0;return a.on=function(){function a(){e.socket.emit("blink cancel"),"pwm"!==this.mode?this.write("HIGH"):this.write(255)}e.dispatch(a.bind(this))},a.off=function(){function a(){e.socket.emit("blink cancel"),"pwm"!==this.mode?this.write("LOW"):this.write(0)}e.dispatch(a.bind(this))},a.fade=function(a,b,c,d){function f(){this.mode="pwm";var c=c||3e3,f=d||200;e.socket.emit("fade",{pin:this.pin,start:a,stop:b,time:c,inc:f})}e.dispatch(f.bind(this))},a.blink=function(a){function c(){e.socket.emit("blink",{pin:[this.pin],length:a,id:b})}e.dispatch(c.bind(this)),++b},a.noBlink=function(){function a(){e.socket.emit("blink"+b+" cancel")}e.dispatch(a)},a}var e=a("./socket_utils.js");b.exports=d},{"./socket_utils.js":9}],4:[function(a,b,c){function d(a){return e.dispatch(e.pinInit(a.pin,a.mode,a.direction)),e.constructFuncs(a),a.on=function(){function a(){"pwm"!==this.mode?this.write("HIGH"):this.write(255)}e.dispatch(a.bind(this))},a.off=function(){function a(){"pwm"!==this.mode?this.write("LOW"):this.write(10)}e.dispatch(a.bind(this))},a}var e=a("./socket_utils.js");b.exports=d},{"./socket_utils.js":9}],5:[function(a,b,c){function d(a){return e.dispatch(e.pinInit(a.pin,a.mode,a.direction)),e.constructFuncs(a),a.read=function(b){function c(a){this.readcb&&this.readcb(a.val),this.val=a.val,e.readTests[this.special]&&e.readTests[this.special].call(this,a.val)}var d=e.socketGen("analog","read",a);return e.dispatch(d,b),e.socket.on("return val",c.bind(this)),function(a){d(a)}},a.tone=function(a,b){function c(){e.socket.emit("tone",{tone:a,duration:b,pin:this.pin})}e.dispatch(c.bind(this))},a.noTone=function(){function a(){e.socket.emit("cancel tones")}e.dispatch(a.bind(this))},a.threshold=function(a){this.threshold=a,this.overThreshold=function(){return this.val>this.threshold}},a}var e=a("./socket_utils.js");b.exports=d},{"./socket_utils.js":9}],6:[function(a,b,c){function d(a){var b=a.pin;a.redPin=b.r||b.red,a.greenPin=b.g||b.green,a.bluePin=b.b||b.blue,a.common=b.common||b.c||"cathode",e.dispatch(e.pinInit(a.redPin,a.mode,a.direction)),e.dispatch(e.pinInit(a.greenPin,a.mode,a.direction)),e.dispatch(e.pinInit(a.bluePin,a.mode,a.direction)),a.write=function(a){function b(){e.socket.emit("rgb write",{red:[this.redPin,this.color.writeArr[0]],green:[this.greenPin,this.color.writeArr[1]],blue:[this.bluePin,this.color.writeArr[2]]})}this.color=Array.isArray(a)?p5.prototype.color(a):a,this.color.writeArr=[],"anode"===this.common?(this.color.writeArr[0]=255-this.color.rgba[0],this.color.writeArr[1]=255-this.color.rgba[1],this.color.writeArr[2]=255-this.color.rgba[2]):this.color.writeArr=this.color.rgba,e.dispatch(b.bind(this))},a.read=function(a){function b(){function b(a){this.incomingColor[a.type]=a.val,3===Object.keys(this.incomingColor).length&&(this.color=p5.prototype.color([this.incomingColor.red,this.incomingColor.green,this.incomingColor.blue]),this.readcb(this.color))}a&&(this.readcb=a),e.socket.emit("rgb read",{pins:{red:this.redPin,green:this.greenPin,blue:this.bluePin},arg:a}),e.socket.on("rgb return red",b.bind(this)),e.socket.on("rgb return green",b.bind(this)),e.socket.on("rgb return blue",b.bind(this))}this.incomingColor={},e.dispatch(b.bind(this))};var c="anode"===a.common?255:0,d="anode"===a.common?0:255;return a.on=function(){function a(){e.socket.emit("rgb blink cancel");var a=this.offSaved||this.color.writeArr||[d,d,d];this.write(a)}e.dispatch(a.bind(this))},a.off=function(){function a(){e.socket.emit("rgb blink cancel"),this.write([c,c,c])}this.offSaved=this.color.writeArr.slice(),e.dispatch(a.bind(this))},a.blink=function(){function a(){e.socket.emit("rgb blink",{pins:{red:[this.redPin,this.color.writeArr[0]||255],green:[this.greenPin,this.color.writeArr[1]||255],blue:[this.bluePin,this.color.writeArr[2]||255]},length:length})}e.dispatch(a.bind(this))},a.noBlink=function(){function a(){e.socket.emit("rgb blink cancel")}e.dispatch(a)},a.fade=function(a,b,c){function d(){e.socket.emit("rgb fade",{red:{pin:this.redPin,start:a[0],stop:a[1],time:a[2]||3e3,inc:a[3]||200},green:{pin:this.greenPin,start:b[0],stop:b[1],time:b[2]||3e3,inc:b[3]||200},blue:{pin:this.bluePin,start:c[0],stop:c[1],time:c[2]||3e3,inc:c[3]||200}})}e.dispatch(d.bind(this))},a}var e=a("./socket_utils.js");b.exports=d},{"./socket_utils.js":9}],7:[function(a,b,c){var d=a("./socket_utils.js"),e=d.socket,f={},g=function(){return f.connect=function(a,b){e.emit("serial init",{path:a,config:b})},f.read=function(a){e.emit("serial read"),e.on("serial read return",function(b){f.data=b,a(b)})},f.readEvent=f.read,f.readData=function(){return this.data},f.write=function(a,b){e.emit("serial write",{arg:a}),e.on("serial write return",function(a){b&&b(a)})},f.list=function(a){e.emit("serial list"),e.on("serial list return",function(b){console.log(b),a&&a(b.data)})},f};b.exports=g},{"./socket_utils.js":9}],8:[function(a,b,c){function d(a){return e.dispatch(e.pinInit(a.pin,a.mode,a.direction)),e.constructFuncs(a),a.rangeMin=0,a.rangeMax=45,a.write=function(b){var c=e.socketGen("servo","write",a);e.dispatch(c,b)},a.range=function(a){function b(){e.socket.emit("range",{pin:this.pin,range:a})}this.rangeMin=a[0],this.rangeMax=a[1],e.dispatch(b.bind(this))},a.sweep=function(a){function b(){e.socket.emit("sweep",{pin:this.pin,min:this.rangeMin,max:this.rangeMax,inc:a})}e.dispatch(b.bind(this))},a.noSweep=function(){function a(){e.socket.emit("sweep cancel")}e.dispatch(a.bind(this))},a}var e=a("./socket_utils.js");b.exports=d},{"./socket_utils.js":9}],9:[function(a,b,c){var d=io.connect("http://localhost:8000/sensors");d.on("error",function(a){console.log(a)});var e={boardInit:function(a,b){d.emit("board object",{board:b,port:a})},board:void 0,constructFuncs:function(a,b){function c(a){this.readcb&&this.readcb(a.val),this.val=a.val,e.readTests[this.special]&&e.readTests[this.special].call(this,a.val)}var b=b||a.mode;return a.read=function(f){var g=e.socketGen(b,"read",a);return e.dispatch(g,f),d.on("return val"+a.pin,c.bind(this)),function(a){g(a)}},a.write=function(c){var d=e.socketGen(b,"write",a);return e.dispatch(d,c),function(a){d(a)}},a},dispatch:function(a,b){this.board.ready?a(b):this.board.eventQ.push({func:a,args:[b]})},pinInit:function(a,b,c){return function(){d.emit("pin object",{pin:a,mode:b.toLowerCase(),direction:c.toLowerCase()})}},readTests:{button:function(a){1===a?(this.pressedOnce=!0,this.buttonPressedcb&&this.buttonPressedcb(),this.timeout=!!this.buttonHeldcb&&this.buttonHeldcb()):0===a&&(this.pressedOnce&&this.buttonReleasedcb&&this.buttonReleasedcb(),this.timeout&&clearTimeout(this.timeout))},temp:function(a){var b={CtoF:function(a){return 1.8*a+32},CtoK:function(a){return a+273.15}};this.C=(a*(1e3*this._voltsIn/1024)-500)/10,this.F=b.CtoF(this.C),this.K=b.CtoK(this.C)},vres:function(a){this.readRange&&this.readRange()}},socket:d,socketGen:function(a,b,c){function e(a){return a.charAt(0).toUpperCase()+a.substring(1)}return function(f){"read"===b&&(c.readcb=f),d.emit("action",{action:a+e(b),pin:c.pin,type:b,arg:f})}}};b.exports=e},{}],10:[function(a,b,c){var d={button:a("./button.js"),led:a("./led.js"),motor:a("./motor.js"),piezo:a("./piezo.js"),rgbled:a("./rgb.js"),serial:a("./serial.js"),servo:a("./servo.js"),temp:a("./temp.js"),vres:a("./variable_resistor.js")};b.exports=d},{"./button.js":2,"./led.js":3,"./motor.js":4,"./piezo.js":5,"./rgb.js":6,"./serial.js":7,"./servo.js":8,"./temp.js":11,"./variable_resistor.js":12}],11:[function(a,b,c){function d(a){var b=a.pin,c=b.pin;a._voltsIn=b.voltsIn,a.pin=c,a.direction="input",e.dispatch(e.pinInit(a.pin,a.mode,a.direction)),e.constructFuncs(a);var d="Remember to call read before try to get a temp value.";return a.C=function(){throw new Error(d)},a.F=function(){throw new Error(d)},a.K=function(){throw new Error(d)},a}var e=a("./socket_utils.js");b.exports=d},{"./socket_utils.js":9}],12:[function(a,b,c){function d(a){return a.direction="input",e.dispatch(e.pinInit(a.pin,a.mode,a.direction)),e.constructFuncs(a),a.range=function(a){function b(){this.readRange=function(){this.val=this.val/1023*(d-c)+c}}var c=a[0],d=a[1];e.dispatch(b.bind(this))},a.threshold=function(a){this.threshold=a,this.overThreshold=function(){return this.val>this.threshold}},a}var e=a("./socket_utils.js");b.exports=d},{"./socket_utils.js":9}]},{},[1])(1)});